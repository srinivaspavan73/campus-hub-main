import{r as o,j as e}from"./index-oRpEOpm0.js";function E(){const[a,h]=o.useState({email:"",password:"",confirmPassword:""}),[r,g]=o.useState({}),[w,u]=o.useState(!1),[x,n]=o.useState(""),[c,j]=o.useState(!1),[b,y]=o.useState(""),[d,m]=o.useState({connected:!1,testing:!1}),p="http://localhost:5000";o.useEffect(()=>{P()},[]);const P=async()=>{m(s=>({...s,testing:!0}));try{(await fetch(`${p}/`)).ok?m({connected:!0,testing:!1}):m({connected:!1,testing:!1})}catch{m({connected:!1,testing:!1})}},f=s=>{const{name:t,value:i}=s.target;h(l=>({...l,[t]:i})),r[t]&&g(l=>({...l,[t]:""})),x&&n("")},v=s=>{const t=s.trim().toLowerCase();return t.endsWith("@gmail.com")?t.split("@")[0].startsWith("pavan")?{valid:!0,normalizedEmail:t}:{valid:!1,message:'Email must start with letter "pavan"'}:{valid:!1,message:"Email must end with @gmail.com"}},N=()=>{const s={};if(!a.email)s.email="Email is required";else{const t=v(a.email);t.valid||(s.email=t.message)}return a.password?a.password.length<6&&(s.password="Password must be at least 6 characters"):s.password="Password is required",a.confirmPassword?a.password!==a.confirmPassword&&(s.confirmPassword="Passwords do not match"):s.confirmPassword="Please confirm your password",g(s),Object.keys(s).length===0},S=async s=>{if(s.preventDefault(),!!N()){if(!d.connected){n("API server is not connected. Please check if the backend server is running.");return}u(!0),n(""),y("");try{const t=v(a.email);if(!t.valid){n(t.message),u(!1);return}const i=await fetch(`${p}/user/signup`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t.normalizedEmail,password:a.password})}),l=await i.json();i.ok&&l.success?(y("ğŸ‰ Account created successfully! Please sign in to continue."),h({email:"",password:"",confirmPassword:""}),setTimeout(()=>{window.location.href="/signin"},2e3)):n(l.msg||"Signup failed. Please try again.")}catch(t){console.error("ğŸ’¥ Signup error:",t),t.name==="TypeError"&&t.message.includes("fetch")?n("Unable to connect to the custom API server. Please ensure the backend is running on "+p):n("An error occurred during signup. Please try again.")}finally{u(!1)}}};return e.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[e.jsx("h1",{className:"text-center text-3xl font-extrabold text-gray-900",children:"ğŸ“ CampusHub"}),e.jsx("h2",{className:"mt-6 text-center text-2xl font-bold text-gray-900",children:"Create your account"}),e.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Already have an account?"," ",e.jsx("a",{href:"/signin",className:"font-medium text-blue-600 hover:text-blue-500 cursor-pointer",children:"Sign in"})]}),e.jsx("div",{className:"mt-3 text-center",children:d.testing?e.jsx("p",{className:"text-xs text-yellow-600",children:"ğŸ”„ Checking API connection..."}):d.connected?e.jsx("p",{className:"text-xs text-green-600",children:"âœ… Custom API Connected - Ready for Database Storage"}):e.jsx("p",{className:"text-xs text-red-600",children:"âŒ API Not Connected - Please start backend server"})})]}),e.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:e.jsxs("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[x&&e.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-lg",children:e.jsx("p",{className:"text-sm",children:x})}),b&&e.jsx("div",{className:"mb-4 p-3 bg-green-100 border border-green-400 text-green-700 rounded-lg",children:e.jsx("p",{className:"text-sm font-medium",children:b})}),e.jsxs("form",{onSubmit:S,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address *"}),e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",value:a.email,onChange:f,className:`appearance-none block w-full px-3 py-2 border ${r.email?"border-red-300":"border-gray-300"} rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm`,placeholder:"pavan@gmail.com"}),r.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.email})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"password",name:"password",type:c?"text":"password",autoComplete:"new-password",value:a.password,onChange:f,className:`appearance-none block w-full px-3 py-2 border ${r.password?"border-red-300":"border-gray-300"} rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm pr-10`,placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600",onClick:()=>j(!c),children:c?"ğŸ™ˆ":"ğŸ‘ï¸"})]}),r.password&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.password})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm Password *"}),e.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:c?"text":"password",autoComplete:"new-password",value:a.confirmPassword,onChange:f,className:`appearance-none block w-full px-3 py-2 border ${r.confirmPassword?"border-red-300":"border-gray-300"} rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm`,placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"}),r.confirmPassword&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.confirmPassword})]}),e.jsx("button",{type:"submit",disabled:w||!d.connected,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed",children:w?"Creating account...":"ğŸš€ Create Account"})]})]})})]})}export{E as default};
