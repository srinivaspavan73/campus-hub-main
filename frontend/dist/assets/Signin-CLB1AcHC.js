import{r as a,u as I,a as P,j as e}from"./index-oRpEOpm0.js";import{u as z}from"./userAtom-CADv8YHu.js";import{a as D}from"./axios-upsvKRUO.js";import{c as L,E as M}from"./eye-w8KR_Q3p.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=L("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);function _(){a.useEffect(()=>{localStorage.getItem("token")&&o("/dashboard")},[]);const[m,f]=a.useState(""),[u,v]=a.useState(""),[x,h]=a.useState(null),[i,n]=a.useState(""),[g,b]=a.useState(!1),[l,y]=a.useState(!1),o=I(),j=P(z),p=t=>{const s=t.trim().toLowerCase();return s.endsWith("@gmail.com")?s.split("@")[0].startsWith("p")?{valid:!0,normalizedEmail:s}:{valid:!1,message:'Email must start with letter "p"'}:{valid:!1,message:"Email must end with gmail.com"}},w=t=>{const s=t.target.value;if(f(s),s){const r=p(s);n(r.valid?"":r.message)}else n("")},N=async t=>{var r,d;t.preventDefault(),h(null);const s=p(m);if(!s.valid){n(s.message);return}b(!0);try{const c=s.normalizedEmail,S=await D.post("http://localhost:5000/user/signin",{email:c,password:u}),{token:k,user:C}=S.data;localStorage.setItem("token",k),j(C),o("/dashboard")}catch(c){h(((d=(r=c.response)==null?void 0:r.data)==null?void 0:d.msg)||"Something went wrong. Please try again.")}finally{b(!1)}},E=()=>{y(!l)};return e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-r from-blue-100 to-purple-100",children:e.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-xl w-96 border border-gray-200",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:"Welcome Back!"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Sign in to access your account"})]}),x&&e.jsx("div",{className:"bg-red-50 p-3 rounded-lg mb-4 border-l-4 border-red-500",children:e.jsx("p",{className:"text-red-600 text-sm",children:x})}),e.jsxs("form",{onSubmit:N,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Email Address"}),e.jsx("input",{type:"email",className:`w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200 bg-gray-50 hover:bg-white ${i?"border-red-500":"border-gray-300"}`,value:m,onChange:w,placeholder:"pavan@gmail.com",required:!0}),i&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:i}),e.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Email must start with (pavan) and end with (@gmail.com) currently only for gmail students."})]}),e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-between items-center mb-1",children:e.jsx("label",{className:"block text-gray-700 font-medium",children:"Password"})}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:l?"text":"password",className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200 bg-gray-50 hover:bg-white",value:u,onChange:t=>v(t.target.value),placeholder:"••••••••",required:!0}),e.jsx("button",{type:"button",className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 focus:outline-none",onClick:E,"aria-label":l?"Hide password":"Show password",children:l?e.jsx(W,{size:20}):e.jsx(M,{size:20})})]})]}),e.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition duration-300 font-medium shadow-md disabled:bg-blue-400 disabled:cursor-not-allowed",disabled:g||i,children:g?"Signing in...":"Sign In"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-gray-600",children:["Dont have an account?"," ",e.jsx("a",{href:"/signup",className:"text-blue-600 hover:underline font-medium",children:"Sign up"})]})}),e.jsx("div",{className:"mt-6",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-300"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsxs("span",{className:"px-2 bg-white text-gray-500",children:["Go back to ",e.jsx("b",{onClick:()=>o("/"),className:"text-blue-500 cursor-pointer",children:"Home"})]})})]})})]})})}export{_ as default};
